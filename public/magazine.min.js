document.addEventListener("DOMContentLoaded",(function(){$("#magazine div").each((function(){const t=$(this).data("bg");$(this).css("background-image","url("+t+")")}));let t,e,n=$("#magazine div").length,i=0;function a(){const t=document.getElementById("mag-container"),e=t.clientWidth,n=t.clientHeight;$("#magazine").turn("size",e,n),function(){let t=window.matchMedia("(orientation: portrait)").matches?"single":"double";$("#magazine").turn("display",t)}()}fetch("https://ipv4.icanhazip.com").then((t=>t.text())).then((t=>{let e=t.trim();$("#ipv4-label").text(`IPv4: ${e}`)})).catch((()=>{$("#ipv4-label").text("IPv4: Not available")})),fetch("https://ipv6.icanhazip.com").then((t=>t.text())).then((t=>{let e=t.trim();$("#ipv6-label").text(`IPv6: ${e}`)})).catch((()=>{$("#ipv6-label").text("IPv6: Not available")})),$("#magazine div").each((function(){const t=$(this).data("bg"),e=new Image;e.src=t,e.onload=function(){i++;let t=i/n*100;$("#progress-bar").prop("value",t),$("#progress-label").text(Math.round(t)+"%"),$("#loading-log").text("Loaded "+i+" of "+n),i==n&&$("#loading-screen").fadeOut()}})),$("#magazine").turn({display:$(window).width()<768?"single":"double",acceleration:!0,gradients:!$.isTouch,elevation:50}),$("#prevBtn").click((function(){$("#magazine").turn("previous")})),$("#nextBtn").click((function(){$("#magazine").turn("next")})),$(window).on("keydown",(function(t){37==t.keyCode?$("#magazine").turn("previous"):39==t.keyCode&&$("#magazine").turn("next")})),a(),window.addEventListener("resize",a),window.addEventListener("orientationchange",(()=>{setTimeout(a,300)})),window.matchMedia("(orientation: portrait)").addEventListener("change",a),$("#magazine").on("touchstart",(function(e){t=e.originalEvent.touches[0].clientX})),$("#magazine").on("touchmove",(function(t){e=t.originalEvent.touches[0].clientX})),$("#magazine").on("touchend",(function(){t-e>50?$("#magazine").turn("next"):e-t>50&&$("#magazine").turn("previous")}))}));